#### Properties for IOT IBM Router
catalyst:
  iotibm:
    carservice-datasource:
      driver-class-name: com.mysql.jdbc.Driver
      type: com.zaxxer.hikari.HikariDataSource
      url: "jdbc:mysql://mysql:3306/carservice?useSSL=false"
      username: root
      password: root
      hikari:
        connectionTimeout: 30000
        maximum-pool-size: 50
        pool-name: appConnectionPool
    insurance-datasource:
      driver-class-name: com.mysql.jdbc.Driver
      type: com.zaxxer.hikari.HikariDataSource
      url: "jdbc:mysql://mysql:3306/insurance?useSSL=false"
      username: root
      password: root
      hikari:
        connectionTimeout: 30000
        maximum-pool-size: 50
        pool-name: appConnectionPool
    direct:
        banking: banking
        userApproval: userApproval
    driver: com.mysql.jdbc.Driver
    insert:
        into:
            cardata: "INSERT INTO car_data(car_id,user_id,miles,price) VALUES(:#${body.carId},:#${body.carId},:#${body.deltaMiles},:#${body.premium})"
    mosquitto:
        host: "tcp://mosquitto:1883"
    mqtt:
        topic: "CarService/incident"
    payment:
        host: "payment:8899/payments"
    select:
        from:
            cardata: "SELECT * FROM car_data WHERE payment_id = {property.paymentId}"
            cardata.status.new: "SELECT * FROM car_data WHERE status = 'new'"
            clientsdata: "SELECT * FROM clients_data WHERE device_id = '${body.deviceId}'"
    update:
        cardata:
            status:
                paid: "UPDATE car_data SET status = 'paid' WHERE payment_id = {property.paymentId}"
                pending: "UPDATE car_data SET status = 'pending' WHERE payment_id = {property.payment_id}"
                rejected: "UPDATE car_data SET status = 'rejected' WHERE payment_id = {property.paymentId}"
    user:
        host: "user:8889/userResponse"


